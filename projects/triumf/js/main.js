var App={win:$(window),doc:$(document),max_mobile_width:768,is_mobile:detectmob()};function detectmob(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function debounce(o,s,n){var r;return function(){var e=this,t=arguments,i=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||o.apply(e,t)},s),i&&o.apply(e,t)}}App.HeaderMenuDesktop=function(){void 0!==$.fn.superfish?$(".h-menu > ul").superfish():console.info("required superfish(.min).js")},App.HeaderMenuMobile=function(){if(void 0!==$.fn.sidr){function e(){this.render()}var n;e.prototype={el:{sidr_selector:".sidr",h_menu_selector:".h-menu",mobile_btn_selector:".mobile-mainmenu-btn",sidr_class:"sidr-mobile-mainmenu"},render:function(){(n=this).sidr_init(),n.sidr_swipe(),n.sidr_resize()},sidr_init:function(){$(n.el.mobile_btn_selector).sidr({name:n.el.sidr_class,source:n.el.h_menu_selector})},sidr_close:function(){$.sidr("close",n.el.sidr_class)},sidr_swipe:function(){void 0!==$.fn.swipe&&$(n.el.sidr_selector).swipe({excludedElements:"button, input, select, textarea, .noSwipe",swipeLeft:function(e,t,i,o,s){n.sidr_close()}})},sidr_resize:function(){var e=debounce(function(){App.win.width()>App.max_mobile_width&&n.sidr_close()},250);App.win.resize(e)}},new e}else console.info("required jquery.sidr(.min).js")},App.OrderCall=function(){if(void 0!==$.fn.sidr){function e(){this.render()}var t;e.prototype={el:{form_link_selector:".h-order-call-btn",form_selector:"#order-call-form form",form_response_selector:"#order-call-form .form-response",form_submit_selector:"#order-call-form :submit",ajax_loader_selector:"#order-call-form .ajax-loader"},render:function(){(t=this).form_init(),t.form_validate()},form_init:function(){$(t.el.form_link_selector).magnificPopup({type:"inline",preloader:!1,focus:"#name",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",removalDelay:300,mainClass:"my-mfp-zoom-in",tClose:"Закрыть",callbacks:{beforeOpen:function(){App.win.width()<App.max_mobile_width?this.st.focus=!1:this.st.focus="#name"}}})},form_validate:function(){$(t.el.form_selector).submit(function(e){$(t.el.form_response_selector).removeClass("green red").html("&nbsp;").css("visibility","hidden"),e.preventDefault()}),$(t.el.form_selector).validate({submitHandler:function(e){$(t.el.form_submit_selector).prop("disabled",!0),$(t.el.ajax_loader_selector).fadeIn(),$.ajax({url:$(t.el.form_selector).attr("action"),type:"POST",dataType:"json",cache:!1,data:$(t.el.form_selector).serialize(),success:function(e){$(t.el.form_response_selector).html(e.message).addClass("green"),console.log("success: "+e.message)},error:function(e){e.hasOwnProperty("responseJSON")?($(t.el.form_response_selector).html(e.responseJSON.message).addClass("red"),console.log("error: "+e.responseJSON.message)):$(t.el.form_response_selector).html(e.status+" "+e.statusText+" Ошибка соединения").addClass("red")},complete:function(){$(t.el.form_response_selector).slideDown("fast").css("visibility","visible"),$(t.el.ajax_loader_selector).fadeOut(),$(t.el.form_submit_selector).prop("disabled",!1)}})}})}},new e}else console.info("required jquery.magnific-popup(.min).js")},App.ItemSlider=function(){void 0!==$.fn.slick?$(".big-slider").slick({dots:!0,speed:500,swipeToSlide:!0,arrows:!1,autoplay:!0,autoplaySpeed:3e3}):console.info("required slick(.min).js")},App.ItemCarousel=function(){void 0!==$.fn.slick?$(".carousel-small").slick({infinite:!1,speed:300,touchThreshold:10,swipeToSlide:!0,slidesToShow:6,slidesToScroll:1,responsive:[{breakpoint:1280,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]}):console.info("required slick(.min).js")},App.ContactMap=function(){function e(){this.render()}var i,o;e.prototype={el:{map_id:"triumph-map",position_lat:"position-lat",position_lng:"position-lng",center_lat:"center-lat",center_lng:"center-lng",tab_link_selector:".tab-link",tab_link_active_class:"active",tab_link_active_selector:".active",tabs_links_selector:".tabs-links",tab_content_selector:".tab-content",active_tab:""},render:function(){0!=$("#"+this.el.map_id).length&&("undefined"!=typeof ymaps?ymaps.ready((o=this).Map_init):console.info("required api-maps.yandex.ru/2.1/?lang=ru_RU"))},Map_init:function(){$("body").addClass("page-map"),(i=new ymaps.Map(o.el.map_id,{center:[0,0],zoom:16,controls:["zoomControl","fullscreenControl"]})).behaviors.disable("scrollZoom"),o.addMarkers(),0==$(o.el.tabs_links_selector).find(o.el.tab_link_active_selector).length&&$(o.el.tab_link_selector).first().addClass(o.el.tab_link_active_class),o.el.active_tab=$(o.el.tabs_links_selector).find(o.el.tab_link_active_selector),o.hideTabs(),o.activeTab(),o.changeLocation(o.el.active_tab.data(o.el.center_lat),o.el.active_tab.data(o.el.center_lng)),o.changeTab()},addMarkers:function(){$(o.el.tab_link_selector).each(function(e,t){i.geoObjects.add(new ymaps.Placemark([$(t).data(o.el.position_lat),$(t).data(o.el.position_lng)],{hintContent:$(t).text()},{iconLayout:"default#image",iconImageHref:"img/placemark.png",iconImageSize:[26,34],iconImageOffset:[-13,-42]}))})},activeTab:function(){$(o.el.active_tab.attr("href")).show()},hideTabs:function(){$(o.el.tab_content_selector).hide()},changeLocation:function(e,t){i.setCenter([e,t],16)},changeTab:function(){App.doc.on("click",o.el.tab_link_selector,function(){return $(this).hasClass("active")||($(o.el.tab_link_selector).removeClass("active"),$(this).addClass("active"),o.hideTabs(),$($(this).attr("href")).show(),o.changeLocation($(this).data(o.el.center_lat),$(this).data(o.el.center_lng))),!1})}},new e},$(document).ready(function(){App.HeaderMenuDesktop(),App.HeaderMenuMobile(),App.OrderCall(),App.ItemSlider(),App.ItemCarousel(),App.ContactMap()});