var App={win:$(window),doc:$(document),is_mobile:detectmob(),ms_ie:/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent),header_height:0,middle_height:0,max_mobile_width:992};function detectmob(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function debounce(s,o,n){var r;return function(){var e=this,i=arguments,t=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||s.apply(e,i)},o),t&&s.apply(e,i)}}function fileBoxesInit(e){Array.prototype.forEach.call(e,function(e){var t=e.parentNode,s=t.innerHTML;e.addEventListener("change",function(e){var i="";(i=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?t.querySelector("span").innerHTML=i:t.innerHTML=s}),e.addEventListener("focus",function(){e.classList.add("has-focus")}),e.addEventListener("blur",function(){e.classList.remove("has-focus")})})}function check_scroll(){0==$(window).scrollTop()?$("body").addClass("scrollTop"):$(window).scrollTop()+$(window).height()==$(document).height()?$("body").addClass("scrollBottom"):$("body").removeClass("scrollTop scrollBottom")}function createWaveBg(e,r){var i=document.getElementById(e),a=i.getContext("2d"),l=i.width=window.innerWidth,c=i.height=window.innerHeight,d="#00a098",p=2,u=90;App.win.width()<App.max_mobile_width&&(p=1);var t=0,s=function(){window.requestAnimationFrame(s),function(e){if("gradient"==r){var i=a.createLinearGradient(l,0,l,c);i.addColorStop(0,"#00a098"),i.addColorStop(1,"#00cec9"),a.fillStyle=i,d="#ffffff",p=1.5,u=65}else a.fillStyle=r;a.fillRect(0,0,l,c);for(var t=0;t<10;t++){for(var s=-0;s<l;s+=5){var o=Math.cos(t/10)+s+.003*s*s,n=Math.floor(c/2+s/2*Math.sin(s/u-e/u)+30*t*Math.sin(s/u-(t+e)/10));a.beginPath(),a.arc(o,n,p,0,2*Math.PI),a.closePath(),a.fillStyle=d,a.fill()}a.stroke()}}(t+=.025)};s()}App.Sidebar=function(){function e(){this.render()}var n;e.prototype={el:{sidebar_selector:".right-sidebar",content_selector:".content",mobile_btn_selector:".mobile-mainmenu-btn",sidebar_width:0},render:function(){(n=this).sidebarInit(),n.sidebarSwipe(),n.sidebarResize(),n.sidebarClose(),$(window).trigger("resize")},sidebarInit:function(){App.doc.on("click",n.el.mobile_btn_selector,function(){return n.el.sidebar_width=$(n.el.sidebar_selector).outerWidth(),$("body").hasClass("sidebar-open")?($(n.el.sidebar_selector).css("right",-n.el.sidebar_width),setTimeout("$('body').removeClass('sidebar-open');",500)):($("body").addClass("sidebar-open"),$(n.el.sidebar_selector).css("right","0")),!1})},sidebarClose:function(){n.el.sidebar_width=$(n.el.sidebar_selector).outerWidth(),App.win.width()>App.max_mobile_width&&($(n.el.sidebar_selector).css("right",0),$(n.el.content_selector).css("padding-right",n.el.sidebar_width),setTimeout("$('body').removeClass('sidebar-open');",500)),$(".content__body").css("min-height",App.win.height())},sidebarSwipe:function(){void 0!==$.fn.swipe&&$(n.el.sidebar_selector).swipe({excludedElements:"button, input, select, textarea, .noSwipe",swipeRight:function(e,i,t,s,o){App.win.width()<=App.max_mobile_width&&($(n.el.sidebar_selector).css("right",-n.el.sidebar_width),$(n.el.content_selector).css("padding-right","0"),setTimeout("$('body').removeClass('sidebar-open');",500))}})},sidebarResize:function(){var e=debounce(function(){n.sidebarClose()},250);App.win.resize(e)}},new e},$.validator.addMethod("lettersonly",function(e,i){return this.optional(i)||/^[\u0400-\u04FF\s]*$/i.test(jQuery.trim(e))},"Только символы кириллицы и пробелы"),$.validator.addMethod("filesize",function(e,i,t){return this.optional(i)||i.files[0].size<=t},function(e){return"Максимальный размер - "+filesize(e,{exponent:2,round:1})}),App.Forms=function(){function e(){this.render()}var n;e.prototype={el:{application_form_selector:"#application_form",form_response_selector:".form-response",form_submit_selector:":submit"},render:function(){(n=this).Selects(),n.popupForm(),n.fileBoxes(),n.applicationForm()},Selects:function(){$(".select select").chosen({disable_search_threshold:20})},popupForm:function(){$(".js-popup").magnificPopup({type:"inline",preloader:!1,focus:"#name",tClose:"Закрыть",fixedContentPos:!1,fixedBgPos:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$(window).width()<992?this.st.focus=!1:this.st.focus="#name"}}})},fileBoxes:function(){fileBoxesInit($(".inputfile"))},applicationForm:function(){var o=$(n.el.application_form_selector).find(n.el.form_submit_selector).children("span").text();$(n.el.application_form_selector).each(function(e){$(this).submit(function(e){$(this).find(n.el.form_response_selector).removeClass("color-green color-red").html("&nbsp;").css("visibility","hidden").slideUp("fast"),e.preventDefault()}),$(this).validate({rules:{name:{required:!0,maxlength:200,lettersonly:!0},email:{required:!0,email:!0},msg:{required:!0,maxlength:2e3},agreement:{required:!0},file:{extension:"docx|rtf|doc|pdf|txt|jpg|jpeg|png",filesize:1024e3}},messages:{name:{required:"Представьтесь пожалуйста",maxlength:"Не больше 200 символов"},email:{required:"Укажите ваш электронный адрес",email:"Введите корректный адрес типа text@text.text"},msg:{required:"Сообщение должно быть непустым",maxlength:"Не больше 2000 символов"},agreement:{required:"Необходимо дать согласие"},file:{extension:"Допустимый формат: docx|doc|xls|xlsx|rtf|pdf|txt|jpg|jpeg|png",filesize:"Размер не больше 1МБ"}},focusInvalid:!1,invalidHandler:function(e,i){i.numberOfInvalids()},submitHandler:function(i){var t=new FormData,e=$(i).serializeArray();if($(i).find('[name="file"]').length){var s=$(i).find('[name="file"]')[0].files;$.each(s,function(e,i){t.append("file[]",i)})}$.each(e,function(e,i){t.append(i.name,i.value)}),$(i).find(n.el.form_submit_selector).prop("disabled",!0),$(i).find(n.el.form_submit_selector).children("span").text("Отправка..."),$.ajax({url:$(i).attr("action"),type:"POST",dataType:"json",cache:!1,data:t,mimeType:"multipart/form-data",processData:!1,contentType:!1,success:function(e){e.success?$(i).find(n.el.form_response_selector).html("Спасибо! Мы свяжемся с Вами.").addClass("color-green"):$(i).find(n.el.form_response_selector).html("Ошибка отправки письма <br> "+e.ErrorInfo).addClass("color-red")},error:function(e){e.hasOwnProperty("responseJSON")},complete:function(){$(i).find(n.el.form_response_selector).slideDown("fast").css("visibility","visible"),$(i).find(n.el.form_submit_selector).prop("disabled",!1),$(i).find(n.el.form_submit_selector).children("span").text(o)}})}})})}},new e},App.Sliders=function(){$(".services-carousel").slick({slidesPerRow:3,rows:2,infinite:!1,edgeFriction:0,responsive:[{breakpoint:1200,settings:{slidesPerRow:2,rows:2}},{breakpoint:768,settings:{slidesPerRow:1,rows:2}}]}),$(".news-carousel.news-simple").slick({slidesToShow:3,infinite:!1,edgeFriction:0,responsive:[{breakpoint:1200,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),$(".news-carousel.news-gradient").slick({slidesToShow:2.6,infinite:!1,edgeFriction:0,responsive:[{breakpoint:1200,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),$(".news-carousel.news-gradient").on("afterChange",function(e,i,t){i.$slides.length==t+i.options.slidesToShow?($(".news-carousel").addClass("news-carousel--last"),$(".news-carousel").removeClass("news-carousel--first")):0==t?($(".news-carousel").addClass("news-carousel--first"),$(".news-carousel").removeClass("news-carousel--last")):($(".news-carousel").removeClass("news-carousel--last"),$(".news-carousel").removeClass("news-carousel--first"))}),$(".licenses-carousel").slick({slidesToShow:3,infinite:!0,edgeFriction:0,responsive:[{breakpoint:1200,settings:{slidesToShow:2}},{breakpoint:575,settings:{slidesToShow:1}}]}),$(".projects-carousel").slick({slidesToShow:1,infinite:!0,edgeFriction:0,autoplay:!0,autoplaySpeed:2e3})},App.Map=function(){if(!$(".map-block").length)return!1;var e=300,i=0;function t(){i=$(".container__gradient").outerHeight(),e=App.win.height()-i,$(".map-block").height(e)}t();var s=debounce(function(){t()},250);App.win.resize(s)},App.Other=function(){check_scroll(),$(document).scroll(function(){check_scroll()}),$(".right-sidebar").niceScroll({cursorcolor:"#00a098",cursorborder:"none",cursorwidth:"10px",cursorborderradius:"0",autohidemode:!0,hidecursordelay:1e3,zindex:10}),Modernizr.svg&&$('<svg viewBox="0 0 39 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">    <g id="Стрелка" transform="translate(-16.000000, 2.000000)" class="svg-arr" stroke="#00A098" stroke-width="4">        <g id="Group-2" transform="translate(16.000000, 0.000000)">            <path d="M35.5287456,10 L0,10" id="Stroke-1"></path>            <polyline id="Stroke-3" points="25.5183896 20.8052505 35.5183896 10.471666 25.5183896 0.138081491"></polyline>        </g>    </g></g></svg>').insertAfter(".btn .arr"),$(".js-photo-link").magnificPopup({type:"image",tLoading:"Загрузка изображения #%curr%...",mainClass:"mfp-img-mobile",closeBtnInside:!0,fixedContentPos:!1,gallery:{enabled:!0,navigateByImgClick:!0,tCounter:"%curr% из %total%"},image:{tError:'<a href="%url%">Изображение #%curr%</a> не может быть загружено.',titleSrc:function(e){return null!=e.el.attr("title")&&""!=e.el.attr("title")?e.el.attr("title"):""}}}),$(".pdf-popup").magnificPopup({type:"ajax",overflowY:"scroll",mainClass:"pdf-popup"})},App.WavesBg=function(){var e=1,i="#00a098",t="";$(".bg-wave").each(function(){t="canvas-"+e++,$(this).prepend('<canvas id="'+t+'"></canvas>'),i=$(this).hasClass("container__base")?"#ffffff":$(this).hasClass("container__additional")?"#f6f6f6":"gradient",createWaveBg(t,i)})},$(document).ready(function(){App.Other(),App.Sidebar(),App.Forms(),App.Sliders(),App.Map(),App.WavesBg()});