var App={win:$(window),doc:$(document),is_mobile:detectmob(),ms_ie:/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent),max_mobile_width:992,wheeling:!1};function detectmob(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function debounce(t,o,a){var l;return function(){var e=this,i=arguments,n=a&&!l;clearTimeout(l),l=setTimeout(function(){l=null,a||t.apply(e,i)},o),n&&t.apply(e,i)}}function fileBoxesInit(e){Array.prototype.forEach.call(e,function(e){var n=e.parentNode,t=n.innerHTML;e.addEventListener("change",function(e){var i="";(i=this.files&&1<this.files.length?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?n.querySelector("span").innerHTML=i:n.innerHTML=t}),e.addEventListener("focus",function(){e.classList.add("has-focus")}),e.addEventListener("blur",function(){e.classList.remove("has-focus")})})}function check_scroll(){0==$(window).scrollTop()?$("body").addClass("scrollTop"):$(window).scrollTop()+$(window).height()==$(document).height()?$("body").addClass("scrollBottom"):$("body").removeClass("scrollTop scrollBottom")}App.Menu=function(){function e(){this.render()}var a;e.prototype={el:{main_menu_selector:".main-menu",mobile_btn_selector:".js-main-menu-btn",opened_menu_class:"main-menu-opened"},render:function(){(a=this).sidebarInit(),a.sidebarSwipe(),a.sidebarIndexMenu(),a.sidebarSubMenu()},sidebarInit:function(){App.doc.on("click",a.el.mobile_btn_selector,function(e){e.preventDefault(),$(a.el.main_menu_selector).hasClass(a.el.opened_menu_class)?a.sidebarClose():a.sidebarOpen()})},sidebarOpen:function(){$(a.el.main_menu_selector).addClass(a.el.opened_menu_class)},sidebarClose:function(){$(a.el.main_menu_selector).removeClass(a.el.opened_menu_class)},sidebarSwipe:function(){void 0!==$.fn.swipe&&($(a.el.main_menu_selector).swipe({excludedElements:"button, input, select, textarea, .noSwipe, .gsm-menu",swipeUp:function(e,i,n,t,o){a.sidebarClose()}}),$(a.el.mobile_btn_selector).swipe({excludedElements:"button, input, select, textarea, .noSwipe",swipeDown:function(e,i,n,t,o){a.sidebarOpen()}}))},sidebarIndexMenu:function(){App.doc.on("click",".main-menu .gsm-menu > ul > li > a",function(){a.sidebarClose()}),App.doc.on("click",".main-menu-logo a",function(){a.sidebarClose()})},sidebarSubMenu:function(){App.doc.on("click","#main-menu-sub a",function(){a.sidebarClose()})}},new e},$.validator.addMethod("lettersonly",function(e,i){return this.optional(i)||/^[\u0400-\u04FF\s]*$/i.test(jQuery.trim(e))},"Только символы кириллицы и пробелы"),$.validator.addMethod("filesize",function(e,i,n){return this.optional(i)||i.files[0].size<=n},function(e){return"Максимальный размер - "+filesize(e,{exponent:2,round:1})}),App.Forms=function(){function e(){this.render()}var r;e.prototype={el:{application_form_selector:".application_form",form_response_selector:".form-response",form_submit_selector:":submit"},render:function(){(r=this).popupForm(),r.fileBoxes(),r.applicationForm()},popupForm:function(){$(".js-popup").magnificPopup({type:"inline",preloader:!1,focus:"#name",tClose:"Закрыть",fixedContentPos:!0,fixedBgPos:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$(window).width()<992?this.st.focus=!1:this.st.focus="#name"}}})},fileBoxes:function(){fileBoxesInit($(".inputfile"))},applicationForm:function(){var o=$(r.el.application_form_selector).find(r.el.form_submit_selector).text(),a="Отправка...",i={name:{required:"Представьтесь пожалуйста",maxlength:"Не больше 200 символов"},email:{required:"Укажите ваш электронный адрес",email:"Введите корректный адрес типа text@text.text"},phone:{required:"Укажите ваш телефон",maxlength:"Не больше 50 символов"},msg:{required:"Сообщение должно быть непустым",maxlength:"Не больше 2000 символов"},agreement:{required:"Необходимо дать согласие"},file:{extension:"Допустимый формат: docx|doc|xls|xlsx|rtf|pdf|txt|jpg|jpeg|png",filesize:"Размер не больше 1МБ"}},l={success:"Спасибо! Мы свяжемся с Вами.",error:"Ошибка отправки письма <br>"},s="Подтвердите, что вы не робот.";"en"==$("html").attr("lang")&&(a="Sending...",i={name:{required:"Introduce youreself",maxlength:"200 character limit"},email:{required:"Enter your email address",email:"Enter a valid text@text.text address"},phone:{required:"Enter your phone number",maxlength:"50 character limit"},msg:{required:"Message must be non-empty",maxlength:"2000 character limit"},agreement:{required:"Must give consent"},file:{extension:"Valid format: docx|doc|xls|xlsx|rtf|pdf|txt|jpg|jpeg|png",filesize:"Size not larger than 1MB"}},l={success:"Thank! We will contact you.",error:"Error sending letter <br>"},s="Confirm that you are not a robot."),$(r.el.application_form_selector).each(function(e){$(this).submit(function(e){$(this).find(r.el.form_response_selector).removeClass("color-green color-red").html("&nbsp;").css("visibility","hidden").slideUp("fast"),e.preventDefault()}),$(this).validate({rules:{name:{required:!0,maxlength:200},email:{required:!0,email:!0},phone:{maxlength:50},msg:{required:!0,maxlength:2e3},agreement:{required:!0},file:{extension:"docx|rtf|doc|pdf|txt|jpg|jpeg|png",filesize:1024e3}},messages:i,focusInvalid:!1,invalidHandler:function(e,i){},showErrors:function(e,i){console.log(i),0<i.length?$(r.el.application_form_selector).find(r.el.form_submit_selector).addClass("disabled"):$(r.el.application_form_selector).find(r.el.form_submit_selector).removeClass("disabled"),this.defaultShowErrors()},submitHandler:function(i){if(0==grecaptcha.getResponse().length)return alert(s),!1;var n=new FormData,e=$(i).serializeArray();if($(i).find('[name="file"]').length){var t=$(i).find('[name="file"]')[0].files;$.each(t,function(e,i){n.append("file[]",i)})}$.each(e,function(e,i){n.append(i.name,i.value)}),$(i).find(r.el.form_submit_selector).prop("disabled",!0),$(i).find(r.el.form_submit_selector).text(a),$.ajax({url:$(i).attr("action"),type:"POST",dataType:"json",cache:!1,data:n,mimeType:"multipart/form-data",processData:!1,contentType:!1,success:function(e){e.success?$(i).find(r.el.form_response_selector).html(l.success).addClass("color-green"):$(i).find(r.el.form_response_selector).html(l.error+e.ErrorInfo).addClass("color-red"),$(".mfp-wrap").animate({scrollTop:0},"slow")},error:function(e){e.hasOwnProperty("responseJSON")},complete:function(){$(i).find(r.el.form_response_selector).slideDown("fast").css("visibility","visible"),$(i).find(r.el.form_submit_selector).prop("disabled",!1),$(i).find(r.el.form_submit_selector).text(o)}})}})})}},new e},App.Sliders=function(){function o(){$(".js-team-popup").magnificPopup({type:"inline",preloader:!1,focus:"#name",tClose:"Закрыть",fixedContentPos:!0,fixedBgPos:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$(window).width()<992?this.st.focus=!1:this.st.focus="#name"}}})}$(".team-carousel").slick({lazyLoad:"ondemand",slidesToShow:4,infinite:!0,slidesToScroll:1,responsive:[{breakpoint:1280,settings:{slidesToShow:3}},{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:640,settings:{slidesToShow:1}}]}),$(".team-carousel").on("breakpoint",function(e,i,n,t){o()}),o()},App.Map=function(){},App.Other=function(){App.is_mobile?$("html").addClass("is_mobile"):$(window).mousemove(function(e){if($(".parallax-overlay:visible").length&&0==App.wheeling){var i=($(window).width()-$(".parallax-overlay:visible")[0].offsetWidth)/2-(e.pageX-$(window).width()/2)/20,n=($(window).height()-$(".parallax-overlay:visible")[0].offsetHeight)/2-(e.pageY-$(window).height()/2)/20;$(".parallax-overlay:visible").offset({top:n,left:i})}})},App.FullPage=function(){if("fullpage-horizontal"==$(".gsm-fullpage").attr("id")){$("#fullpage-horizontal").fullpage({loopHorizontal:!1,scrollOverflow:!0,continuousVertical:!0,anchors:["slide"],afterSlideLoad:function(e,i,n,t){$(".main-menu .gsm-menu > ul > li").removeClass("active"),$(".main-menu .gsm-menu > ul #li-"+e+"-"+n).addClass("active")},afterRender:function(){App.RemoveMainPreloader()},onSlideLeave:function(e,i,n,t){if($("#map:hover").length)return!1}});var n=0,t=n,o=0,a=0,l=[],s=0;$("#fullpage-horizontal .section .slide").mousewheel(function(e,i){n=$(window).height(),t=n,l=[],s=a=o=0,$(this).find(".fp-scroller").length?(t=$(this).find(".fp-scroller").height(),l=$(this).find(".fp-scroller").css("transform").replace(/[^0-9\-.,]/g,"").split(","),l[12]||l[4],0==(s=l[13]||l[5])&&(o=1,a=0),t==Math.abs(s)+n&&(o=0,a=1)):a=o=1,1==i&&1==o&&$.fn.fullpage.moveSlideLeft(),-1==i&&1==a&&$.fn.fullpage.moveSlideRight(),clearTimeout(App.wheeling),App.wheeling=setTimeout(function(){App.wheeling=!1},700)})}if("fullpage-vertical"==$(".gsm-fullpage").attr("id")){var i=[];$("#menu-vertical li").each(function(e){i.push($(this).data("menuanchor"))});var e=!0,r=!0,c="";App.is_mobile&&(r=e=!1),$("#fullpage-vertical").fullpage({autoScrolling:e,scrollOverflow:r,anchors:i,menu:"#menu-vertical",afterLoad:function(e,i,n){c=$("#menu-vertical li.active").data("menuanchor"),$("#main-menu-sub li").removeClass("active"),$("#main-menu-sub #li-"+c).addClass("active")},afterRender:function(){$(".team-carousel").length&&$(".team-carousel").slick("reinit"),App.RemoveMainPreloader()}})}App.FullpageReBuild()},App.FullpageReBuild=function(){var e=debounce(function(){$.fn.fullpage.reBuild()},300);App.win.resize(e),$.fn.fullpage.reBuild()},App.RemoveMainPreloader=function(){$(".gsm-fullpage").show(),$(".preloader").fadeOut("slow")},App.makeItRain=function(){if(0==$(".gsm-city__rain").length||App.is_mobile)return!1;$(".rain").empty();for(var e=0,i="",n="";e<70;){var t=Math.floor(95*Math.random()+1),o=Math.floor(4*Math.random()+2);i+='<div class="drop" style="left: '+(e+=o)+"%; bottom: "+(o+o-1+100)+"%; animation-delay: 0."+t+"s; animation-duration: 0.5"+t+'s;"><div class="stem" style="animation-delay: 0.'+t+"s; animation-duration: 0.5"+t+'s;"></div><div class="splat" style="animation-delay: 0.'+t+"s; animation-duration: 0.5"+t+'s;"></div></div>',n+='<div class="drop" style="right: '+e+"%; bottom: "+(o+o-1+100)+"%; animation-delay: 0."+t+"s; animation-duration: 0.5"+t+'s;"><div class="stem" style="animation-delay: 0.'+t+"s; animation-duration: 0.5"+t+'s;"></div><div class="splat" style="animation-delay: 0.'+t+"s; animation-duration: 0.5"+t+'s;"></div></div>'}$(".rain.front-row").append(i),$(".rain.back-row").append(n)},$(document).ready(function(){App.Menu(),App.Other(),App.Forms(),App.Sliders(),App.Map(),App.FullPage(),App.makeItRain()});